<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owner Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!--Include the Jquery-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <h1>Owners</h1>

    <!-- Main Table for Owners -->
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Password</th>
                <th>Restaurant Name</th>
            </tr>
        </thead>
        <tbody>
            <% if (owners && owners.length> 0) { %>
                <% owners.forEach(owner=> { %>
                    <tr>
                        <td>
                            <%= owner.firstName %>
                                <%= owner.lastName %>
                        </td>
                        <td>
                            <%= owner.email %>
                        </td>
                        <td>
                            <%= owner.password %>
                        </td>
                        <td>
                            <%= owner.restaurant_name %>
                        </td>
                        <td>
                            <form action="/owner/info/edit" method="get">
                                <button type="submit" class="btn btn-sm btn-danger">edit</button>
                            </form>
                        </td>
                    </tr>
                    <% }); %>
                        <% } else { %>
                            <tr>
                                <td colspan="4">No Owners found</td>
                            </tr>
                            <% } %>
        </tbody>
    </table>

    <!-- Separate Table for Menus -->

    <% if (owners && owners.length> 0) { %>
        <% owners.forEach(owner=> { %>
            <h2>
                <%= owner.restaurant_name %> Menus
            </h2>

            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Menu Name</th>
                        <th>Description</th>
                        <th>Price</th>
                        <th>Menu sku</th>
                        <th>Instock</th>
                        <th>Image</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (owner.restaurant_menus && owner.restaurant_menus.length> 0) { %>
                        <% owner.restaurant_menus.forEach(menu=> { %>
                            <tr>
                                <td>
                                    <%= menu.name %>
                                </td>
                                <td>
                                    <%= menu.description %>
                                </td>
                                <td>$<%= menu.price %>
                                </td>
                                <td>
                                    <%= menu.sku %>
                                </td>
                                <td>
                                    <%= menu.inStock %>
                                </td>
                                <td>$<%= menu.images %>
                                </td>
                                <td>
                                    <form action="/owner/menu/<%= menu._id %>/edit" method="get">
                                        <button type="submit" class="btn btn-sm btn-danger">edit</button>
                                    </form>
                                </td>
                            </tr>
                            </tr>
                            <% }); %>
                                <% } else { %>
                                    <tr>
                                        <td colspan="3">No menus available</td>
                                    </tr>
                                    <% } %>
                </tbody>
            </table>
            <% }); %>
                <% } %>
</body>

</html>